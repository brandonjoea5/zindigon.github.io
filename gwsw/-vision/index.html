<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>GWSW Member Enrollment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Authorize.Net Accept.js (kept for later use) -->
  <script src="https://js.authorize.net/v1/Accept.js" defer></script>

  <!-- Flatpickr (DOB fields) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/flatpickr" defer></script>

  <style>
    :root{
      --brand:#c1161e; --brand-dark:#9e0f16; --ink:#0f172a; --muted:#475569;
      --card:#ffffff; --bg:#f5f6f8; --ring:rgba(193,22,30,.18); --radius:16px;
      --nav-ink:#2b3443;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    a{color:inherit;text-decoration:none}

    /* ===== Top navigation (full-bleed, tabs stretch across screen) ===== */
    header{background:#fff;border-bottom:1px solid #eceff3}
    .navwrap{max-width:1300px;margin:0 auto;padding:10px 16px}
    .navgrid{
      display:grid; grid-template-columns:auto 1fr; gap:18px; align-items:center;
    }
    .brand{font-weight:900;color:var(--brand);font-size:1.15rem;letter-spacing:.2px}
    .tabs{
      display:grid; grid-template-columns:repeat(7,1fr); gap:0; /* 6 links + “Shop” styled */
      border-left:1px solid #f0f2f6; border-right:1px solid #f0f2f6;
    }
    .tab{
      display:flex; align-items:center; justify-content:center;
      padding:12px 10px; font-weight:700; color:var(--nav-ink);
      border-left:1px solid #f0f2f6; border-right:1px solid #f0f2f6;
      transition:background .15s ease, color .15s ease;
      white-space:nowrap;
    }
    .tab:hover{background:#fafbfc;color:var(--brand)}
    .tab.shop{color:var(--brand)}

    /* ===== Banner bar (diagonal red theme) ===== */
    .banner{
      background:
        repeating-linear-gradient(120deg,
          #9f0f16 0px, #9f0f16 40px,
          #b3131a 40px, #b3131a 90px,
          #c1161e 90px, #c1161e 150px);
      color:#fff;
    }
    .banner-inner{
      max-width:1300px; margin:0 auto; padding:24px 16px;
      display:flex; align-items:center; min-height:84px;
    }
    .banner h2{
      margin:0; font-size:1.15rem; letter-spacing:.12em; text-transform:uppercase; font-weight:900;
    }

    /* ===== Full-width hero copy ===== */
    .hero-copy{
      background:#fff; border-bottom:1px solid #eef1f5;
    }
    .hero-inner{
      max-width:1300px; margin:0 auto; padding:28px 16px 22px;
    }
    .h-title{font-size:2rem;line-height:1.1;margin:0 0 10px;font-weight:900}
    .h-sub{color:var(--muted);font-size:1.05rem;line-height:1.5;margin:0 0 6px}
    .info{color:#5f6b7a;font-size:.95rem;margin-top:10px}

    /* ===== Plans block (under the copy) ===== */
    .plans-section{max-width:1300px;margin:14px auto 0;padding:0 16px 22px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:0 8px 30px rgba(22,29,37,.06);border:1px solid #eef1f5}
    .pad{padding:18px}
    .title-sm{font-size:1.05rem;font-weight:800;margin:4px 0 12px}

    .plans{display:grid;gap:14px;grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:700px){.plans{grid-template-columns:1fr}}
    .planbtn{
      display:flex;align-items:center;gap:12px;padding:16px;border-radius:14px;border:1px solid #e7eaf0;background:#fff;cursor:pointer;
      box-shadow:0 4px 14px rgba(10,22,40,.05); transition:transform .06s ease, box-shadow .2s ease, border-color .2s ease;
      text-align:left;
    }
    .planbtn:hover{transform:translateY(-1px);box-shadow:0 8px 22px rgba(10,22,40,.10);border-color:#e0e4ea}
    .pill{background:rgba(193,22,30,.08);color:var(--brand);padding:4px 10px;border-radius:999px;font-size:.8rem;font-weight:800;white-space:nowrap}
    .muted{color:var(--muted);font-size:.93rem}

    /* ===== Form screen (unchanged logic, full width card) ===== */
    .form-wrap{max-width:1100px;margin:18px auto 34px;padding:0 16px}
    .bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .btn{border:none;background:var(--brand);color:#fff;padding:10px 14px;border-radius:10px;font-weight:800;cursor:pointer}
    .btn:hover{background:var(--brand-dark)}
    .btn-ghost{background:#fff;border:1px solid #e7eaf0;color:#1a2430}
    .btn-ghost:hover{border-color:#dfe3ea}
    .hidden{display:none}

    form{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .colspan-2{grid-column:span 2}
    @media (max-width:700px){form{grid-template-columns:1fr}}
    label{font-size:.9rem;font-weight:700;color:#2a3341}
    input, select{width:100%;padding:12px;border:1px solid #d7dbe3;border-radius:12px;background:#fff;font-size:1rem}
    input:focus, select:focus{outline:4px solid var(--ring);border-color:#cfd6df}

    /* Footer info strip (kept) */
    .info-strip{max-width:1300px;margin:0 auto 50px;padding:0 16px}
  </style>
</head>
<body>
  <!-- Top navigation -->
  <header>
    <div class="navwrap">
      <div class="navgrid">
        <div class="brand">GWSW</div>
        <nav class="tabs" aria-label="Primary">
          <a class="tab" href="https://www.gwsw.com/index.html">Home</a>
          <a class="tab" href="https://www.gwsw.com/about_gwsw.html">About</a>
          <a class="tab" href="https://www.gwsw.com/plans.html">Benefits</a>
          <a class="tab" href="https://www.gwsw.com/bus_owner.html">Business Owner</a>
          <a class="tab" href="https://www.gwsw.com/faq.html">FAQs</a>
          <a class="tab" href="https://www.gwsw.com/contact.html">Contact</a>
          <div class="tab shop">Shop</div>
        </nav>
      </div>
    </div>
  </header>

  <!-- Red diagonal banner -->
  <section class="banner" role="img" aria-label="Healthcare alternative">
    <div class="banner-inner">
      <h2>AN AFFORDABLE &amp; RELIABLE HEALTHCARE ALTERNATIVE</h2>
    </div>
  </section>

  <!-- Full-width hero copy -->
  <section class="hero-copy">
    <div class="hero-inner">
      <h1 class="h-title">You are supported every step of the way</h1>
      <p class="h-sub">
        Pick a plan below and complete the short enrollment form. You can go back and change your plan any time before you submit.
      </p>
      <div class="info">
        Questions? Call <strong>(469) 936-GWSW</strong> or email <strong>service@gwsw.com</strong>.
      </div>
    </div>
  </section>

  <!-- Plans underneath -->
  <section class="plans-section">
    <aside class="card pad" id="plan-screen">
      <h3 class="title-sm">Choose your plan</h3>
      <div class="plans" id="plan-grid">
        <button type="button" class="planbtn" data-plan="gwsw">
          <span class="pill">GWSW</span>
          <div>
            <div class="title-sm" style="margin:0">GWSW</div>
            <div class="muted">Core plan</div>
          </div>
        </button>

        <button type="button" class="planbtn" data-plan="gwsw-dental">
          <span class="pill">+ Dental</span>
          <div>
            <div class="title-sm" style="margin:0">GWSW + Dental</div>
            <div class="muted">Adds dental benefits</div>
          </div>
        </button>

        <button type="button" class="planbtn" data-plan="gwsw-vision">
          <span class="pill">+ Vision</span>
          <div>
            <div class="title-sm" style="margin:0">GWSW + Vision</div>
            <div class="muted">Adds vision benefits</div>
          </div>
        </button>

        <button type="button" class="planbtn" data-plan="gwsw-dental-vision">
          <span class="pill">+ Dental &amp; Vision</span>
          <div>
            <div class="title-sm" style="margin:0">GWSW + Dental &amp; Vision</div>
            <div class="muted">Best value bundle</div>
          </div>
        </button>
      </div>
    </aside>
  </section>

  <!-- Form screen (revealed after plan select) -->
  <section class="form-wrap">
    <aside class="card pad hidden" id="form-screen">
      <div class="bar">
        <div>
          <div class="muted" style="font-weight:700">Selected Plan</div>
          <div id="plan-label" class="title-sm">—</div>
        </div>
        <div style="display:flex;gap:8px">
          <button id="back-btn" type="button" class="btn btn-ghost">← Back</button>
          <button id="submit-btn-top" type="submit" form="enroll-form" class="btn">Submit</button>
        </div>
      </div>

      <form id="enroll-form" novalidate>
        <!-- hidden plan value -->
        <input type="hidden" id="plan-input" name="plan" value="" />

        <!-- Benefit level -->
        <div class="colspan-2">
          <label for="benefit_level">Benefit level</label>
          <select id="benefit_level" name="benefit_level" required>
            <option value="">Select benefit level</option>
            <option value="member">Member Only</option>
            <option value="spouse">Member + Spouse</option>
            <option value="child">Member + Child(ren)</option>
            <option value="family">Member + Family</option>
          </select>
        </div>

        <!-- Member -->
        <div>
          <label for="member_first">Member First Name</label>
          <input id="member_first" name="member_first" autocomplete="given-name" required />
        </div>
        <div>
          <label for="member_last">Member Last Name</label>
          <input id="member_last" name="member_last" autocomplete="family-name" required />
        </div>

        <div>
          <label for="member_dob">Member DOB</label>
          <input id="member_dob" name="member_dob" class="dob" type="text" inputmode="numeric" placeholder="MM/DD/YYYY" required />
        </div>
        <div>
          <label for="member_state">State</label>
          <select id="member_state" name="member_state" required></select>
        </div>

        <!-- Spouse -->
        <div id="spouse_block" class="hidden colspan-2 card pad" style="padding:14px">
          <div class="title-sm" style="margin-bottom:8px">Spouse</div>
          <div class="grid" style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label for="spouse_first">Spouse First Name</label>
              <input id="spouse_first" name="spouse_first" autocomplete="given-name" />
            </div>
            <div>
              <label for="spouse_last">Spouse Last Name</label>
              <input id="spouse_last" name="spouse_last" autocomplete="family-name" />
            </div>
            <div>
              <label for="spouse_dob">Spouse DOB</label>
              <input id="spouse_dob" name="spouse_dob" class="dob" type="text" inputmode="numeric" placeholder="MM/DD/YYYY" />
            </div>
            <div>
              <label for="spouse_gender">Spouse Gender</label>
              <select id="spouse_gender" name="spouse_gender">
                <option value="">Select</option>
                <option>Female</option>
                <option>Male</option>
                <option>Non-binary</option>
                <option>Prefer not to say</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Children -->
        <div id="children_block" class="hidden colspan-2 card pad" style="padding:14px">
          <div class="title-sm" style="margin-bottom:8px;display:flex;justify-content:space-between;align-items:center">
            <span>Children</span>
            <div style="display:flex;gap:8px">
              <button type="button" id="child_add" class="btn btn-ghost" style="padding:6px 10px">+ Add Child</button>
              <button type="button" id="child_remove" class="btn btn-ghost" style="padding:6px 10px">− Remove</button>
            </div>
          </div>
          <div id="children_container" class="grid" style="display:grid;grid-template-columns:1fr 1fr;gap:12px"></div>
          <div class="muted" style="font-size:.85rem">You can add up to 4 dependents.</div>
        </div>

        <!-- Contact -->
        <div>
          <label for="phone">Phone</label>
          <input id="phone" name="phone" autocomplete="tel" />
        </div>
        <div>
          <label for="email">Email</label>
          <input id="email" name="email" type="email" autocomplete="email" />
        </div>

        <!-- Address -->
        <div class="colspan-2">
          <label for="address">Address</label>
          <input id="address" name="address" autocomplete="address-line1" />
        </div>
        <div>
          <label for="city">City</label>
          <input id="city" name="city" autocomplete="address-level2" />
        </div>
        <div>
          <label for="zip">ZIP</label>
          <input id="zip" name="zip" inputmode="numeric" autocomplete="postal-code" />
        </div>

        <!-- Submit -->
        <div class="colspan-2" style="display:flex;gap:10px;justify-content:flex-end;margin-top:6px">
          <button class="btn btn-ghost" type="button" id="back-btn-bottom">← Back</button>
          <button class="btn" type="submit">Submit Enrollment</button>
        </div>

        <div class="colspan-2" style="font-size:.85rem;color:#6b7483;margin-top:4px">
          By submitting, you consent to be contacted by telephone, email, or SMS. You may opt out at any time.
        </div>
      </form>
    </aside>
  </section>

  <!-- Info strip (kept) -->
  <div class="info-strip">
    <div class="card pad">
      <div class="info">
        GWSW was designed to improve access for many of healthcare’s basic needs so you can Get Well faster and Stay Well longer.
      </div>
    </div>
  </div>

  <script>
    (function(){
      // ---------- Constants ----------
      const STATES = [
        ["AL","Alabama"],["AK","Alaska"],["AZ","Arizona"],["AR","Arkansas"],["CA","California"],["CO","Colorado"],
        ["CT","Connecticut"],["DE","Delaware"],["FL","Florida"],["GA","Georgia"],["HI","Hawaii"],["ID","Idaho"],["IL","Illinois"],
        ["IN","Indiana"],["IA","Iowa"],["KS","Kansas"],["KY","Kentucky"],["LA","Louisiana"],["ME","Maine"],["MD","Maryland"],
        ["MA","Massachusetts"],["MI","Michigan"],["MN","Minnesota"],["MS","Mississippi"],["MO","Missouri"],["MT","Montana"],
        ["NE","Nebraska"],["NV","Nevada"],["NH","New Hampshire"],["NJ","New Jersey"],["NM","New Mexico"],["NY","New York"],
        ["NC","North Carolina"],["ND","North Dakota"],["OH","Ohio"],["OK","Oklahoma"],["OR","Oregon"],["PA","Pennsylvania"],
        ["RI","Rhode Island"],["SC","South Carolina"],["SD","South Dakota"],["TN","Tennessee"],["TX","Texas"],["UT","Utah"],
        ["VT","Vermont"],["VA","Virginia"],["WA","Washington"],["WV","West Virginia"],["WI","Wisconsin"],["WY","Wyoming"],
        ["DC","District of Columbia"]
      ];

      // ---------- Elements ----------
      const planScreen = document.getElementById('plan-screen');
      const formScreen = document.getElementById('form-screen');
      const planGrid   = document.getElementById('plan-grid');
      const planLabel  = document.getElementById('plan-label');
      const planInput  = document.getElementById('plan-input');
      const backTop    = document.getElementById('back-btn');
      const backBottom = document.getElementById('back-btn-bottom');
      const enrollForm = document.getElementById('enroll-form');
      const memberStateSel = document.getElementById('member_state');

      const benefit = document.getElementById('benefit_level');
      const spouseBlock = document.getElementById('spouse_block');
      const childrenBlock = document.getElementById('children_block');
      const childrenWrap = document.getElementById('children_container');
      const addChildBtn = document.getElementById('child_add');
      const remChildBtn = document.getElementById('child_remove');

      let selectedPlan = "";
      let childCount = 0;
      const MAX_CHILDREN = 4;

      // ---------- Helpers ----------
      function labelForPlan(plan){
        switch(plan){
          case "gwsw": return "GWSW";
          case "gwsw-dental": return "GWSW + Dental";
          case "gwsw-vision": return "GWSW + Vision";
          case "gwsw-dental-vision": return "GWSW + Dental & Vision";
          default: return plan?.toUpperCase() || "—";
        }
      }

      function populateStates(selectEl){
        selectEl.innerHTML = '<option value="">State</option>' +
          STATES.map(([v,t])=>`<option value="${v}">${t}</option>`).join('');
      }

      function initFlatpickr(){
        if (!window.flatpickr) return;
        document.querySelectorAll('input.dob').forEach(el=>{
          flatpickr(el,{ dateFormat:"m/d/Y", allowInput:true, clickOpens:true, maxDate:"today" });
        });
      }

      function toggleBlocks(){
        const val = benefit.value;
        spouseBlock.classList.toggle('hidden', !(val==="spouse" || val==="family"));
        const showKids = (val==="child" || val==="family");
        childrenBlock.classList.toggle('hidden', !showKids);
        if (!showKids) clearChildren();
      }

      function addChild(){
        if (childCount >= MAX_CHILDREN) return;
        childCount++;
        const num = childCount;

        const childFrag = document.createElement('div');
        childFrag.className = "colspan-2";
        childFrag.dataset.child = String(num);
        childFrag.style.borderTop = "1px dashed #e7eaf0";
        childFrag.style.paddingTop = "12px";
        childFrag.innerHTML = `
          <div class="title-sm" style="margin:0 0 8px">Child ${num}</div>
          <div class="grid" style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label for="child${num}_first">Child ${num} First Name</label>
              <input id="child${num}_first" name="child${num}_first" autocomplete="given-name">
            </div>
            <div>
              <label for="child${num}_last">Child ${num} Last Name</label>
              <input id="child${num}_last" name="child${num}_last" autocomplete="family-name">
            </div>
            <div>
              <label for="child${num}_dob">Child ${num} DOB</label>
              <input id="child${num}_dob" name="child${num}_dob" class="dob" type="text" inputmode="numeric" placeholder="MM/DD/YYYY">
            </div>
            <div>
              <label for="child${num}_gender">Child ${num} Gender</label>
              <select id="child${num}_gender" name="child${num}_gender">
                <option value="">Select</option>
                <option>Female</option>
                <option>Male</option>
                <option>Non-binary</option>
                <option>Prefer not to say</option>
              </select>
            </div>
          </div>
        `;
        childrenWrap.appendChild(childFrag);
        initFlatpickr(); // new DOB gets picker too
      }

      function removeChild(){
        if (childCount <= 0) return;
        const last = childrenWrap.querySelector('[data-child="'+childCount+'"]');
        if (last) last.remove();
        childCount--;
      }

      function clearChildren(){
        childrenWrap.innerHTML = "";
        childCount = 0;
      }

      // ---------- Wire up ----------
      populateStates(memberStateSel);

      planGrid.addEventListener('click', (e)=>{
        const btn = e.target.closest('.planbtn');
        if (!btn) return;
        selectedPlan = btn.dataset.plan || "";
        planLabel.textContent = labelForPlan(selectedPlan);
        planInput.value = selectedPlan;

        document.getElementById('plan-screen').classList.add('hidden');
        document.getElementById('form-screen').classList.remove('hidden');
        initFlatpickr();
        window.scrollTo({top:0, behavior:'smooth'});
      });

      function goBack(){
        document.getElementById('form-screen').classList.add('hidden');
        document.getElementById('plan-screen').classList.remove('hidden');
        window.scrollTo({top:0, behavior:'smooth'});
      }
      document.getElementById('back-btn').addEventListener('click', goBack);
      document.getElementById('back-btn-bottom').addEventListener('click', goBack);

      benefit.addEventListener('change', toggleBlocks);
      toggleBlocks();

      addChildBtn.addEventListener('click', addChild);
      remChildBtn.addEventListener('click', removeChild);

      window.addEventListener('load', initFlatpickr);

      enrollForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const data = Object.fromEntries(new FormData(enrollForm).entries());
        // Strip empty child rows
        for (let i=1;i<=MAX_CHILDREN;i++){
          if (!data[`child${i}_first`] && !data[`child${i}_last`] && !data[`child${i}_dob`]){
            delete data[`child${i}_first`];
            delete data[`child${i}_last`];
            delete data[`child${i}_dob`];
            delete data[`child${i}_gender`];
          }
        }
        console.log("Submitting payload:", data);
        alert("Form would submit now. (Connect to your Worker POST endpoint).");
        // Example:
        // const res = await fetch("https://YOUR-WORKER-URL/enroll", {
        //   method:"POST", headers:{ "Content-Type":"application/json" },
        //   body: JSON.stringify(data)
        // });
        // const json = await res.json();
        // // handle response...
      });
    })();
  </script>
</body>
</html>
