<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Zindigon — From imagination to expectation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Zindigon — where fun, magic, and creativity live. Anime, games, streams, and more." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;800;900&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#07070d; --bg2:#0b0b16; --ink:#e6e6ff; --muted:#aab0ff;
      --accent:#7c4dff; --accent-2:#00e0ff; --accent-3:#ff3bf5;
      --card:#0f0f1d; --ring:rgba(124,77,255,.35); --radius:16px;
      --shadow:0 20px 60px rgba(0,0,0,.55), inset 0 0 30px rgba(124,77,255,.12);
      --max:1200px;
    }
    *{box-sizing:border-box}
    html,body{
      margin:0; padding:0; color:var(--ink);
      background: radial-gradient(1200px 800px at 50% -200px, #111229 0%, var(--bg) 60%) fixed;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji','Segoe UI Emoji', sans-serif;
    }
    a{color:inherit}

    /* Background */
    #starfield{position:fixed; inset:0; z-index:-2;}
    .aurora{
      position:fixed; inset:-20vh -10vw; z-index:-1; pointer-events:none;
      background:
        radial-gradient(60vw 60vh at 15% 10%, rgba(0,224,255,.08), transparent 60%),
        radial-gradient(70vw 70vh at 85% -5%, rgba(255,59,245,.06), transparent 60%),
        radial-gradient(80vw 80vh at 50% -15%, rgba(124,77,255,.10), transparent 60%);
      filter: blur(30px) saturate(120%);
    }

    /* Header / Nav */
    header{
      position:sticky; top:0; z-index:100;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(10,10,22,.7), rgba(10,10,22,.25));
      border-bottom: 1px solid rgba(124,77,255,.25);
    }
    .nav{max-width:var(--max); margin:0 auto; padding:10px 16px; display:flex; align-items:center; gap:14px;}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none;}
    .logo-img{ height:28px; width:auto; display:block; border-radius:8px; box-shadow:0 0 18px rgba(124,77,255,.35);} 
    .logo-text{font-family:'Cinzel', serif; letter-spacing:.6px; font-weight:900; font-size:1.1rem; line-height:1; color:white; text-shadow:0 0 10px rgba(124,77,255,.4), 0 0 25px rgba(0,224,255,.2);} 
    .spacer{flex:1}
    .tabs{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    .tab-btn, .menu-btn{
      appearance:none; border:none; cursor:pointer; background:transparent;
      color:var(--muted); padding:10px 12px; border-radius:12px; font-weight:700; outline:none; display:inline-flex; align-items:center; gap:8px;
    }
    .tab-btn:hover,.menu-btn:hover{color:var(--ink)}
    .tab-btn.active{
      color:white; background:linear-gradient(180deg, rgba(124,77,255,.35), rgba(124,77,255,.12));
      box-shadow: inset 0 0 0 1px rgba(124,77,255,.45), var(--shadow);
    }

    /* Dropdowns (Anime / Games) */
    .dropdown{ position:relative; }
    .menu{
      position:absolute; top:100%; left:0; margin-top:8px; min-width:260px; 
      background: linear-gradient(180deg, rgba(14,14,32,.95), rgba(14,14,32,.78));
      border:1px solid rgba(124,77,255,.4); border-radius:12px; box-shadow:var(--shadow);
      padding:8px; display:none; backdrop-filter: blur(8px);
    }
    .menu.show{ display:block; }
    .menu a{ display:flex; align-items:center; gap:8px; padding:10px 12px; border-radius:10px; text-decoration:none; color:var(--ink); }
    .menu a:hover{ background:rgba(124,77,255,.15); }
    @media (max-width:980px){
      .dropdown .menu{ position:fixed; left:16px; right:16px; top:64px; }
    }

    /* Hero layout */
    .hero{ max-width:var(--max); margin:20px auto; padding:0 16px; display:grid; gap:16px;
      grid-template-columns: minmax(0,1fr); }
    @media (min-width:1024px){
      .hero{ grid-template-columns: minmax(0, 2fr) minmax(320px, 1fr);}
    }
    .arcane-card{ background: linear-gradient(180deg, rgba(12,12,28,.85), rgba(14,14,32,.65));
      border:1px solid rgba(124,77,255,.25); border-radius:var(--radius); box-shadow:var(--shadow); }
    .hero-card{ padding:22px; position:relative; overflow:clip; }
    .sigils{ position:absolute; inset:-20% -10% auto auto; height:180%; background:
      radial-gradient(40% 40% at 25% 30%, rgba(0,224,255,.13), transparent 60%),
      radial-gradient(35% 35% at 70% 60%, rgba(255,59,245,.10), transparent 60%),
      conic-gradient(from 0deg, rgba(124,77,255,.12), rgba(124,77,255,0) 40%, rgba(0,224,255,.12) 60%, rgba(0,224,255,0)); 
      filter: blur(45px) saturate(140%); pointer-events:none; transform: translateZ(0);
    }
    .hero-title{ font-family:'Cinzel', serif; font-weight:900; font-size: clamp(2rem, 3.6vw, 3.6rem); line-height:1.05; letter-spacing:.8px;
      background: linear-gradient(92deg, #fff 0%, #dfe4ff 40%, #a5b4ff 60%, #ffffff 100%); -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow: 0 0 35px rgba(124,77,255,.45), 0 0 14px rgba(0,224,255,.25); }
    .hero-sub{ margin-top:10px; color:#d9dcff; font-weight:700; letter-spacing:.4px; text-shadow:0 0 12px rgba(124,77,255,.25); }
    .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:16px;}
    .btn{ display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:14px; font-weight:800; letter-spacing:.2px; text-decoration:none; color:white; background:
      radial-gradient(80% 120% at 0% 0%, rgba(0,224,255,.35), transparent 40%),
      linear-gradient(180deg, rgba(124,77,255,.9), rgba(124,77,255,.65)); box-shadow: 0 8px 30px rgba(124,77,255,.35); border:1px solid rgba(124,77,255,.55); }
    .btn:hover{transform:translateY(-1px); box-shadow:0 12px 40px rgba(124,77,255,.45);} 
    .btn-ghost{ color:var(--ink); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.12); box-shadow: inset 0 0 0 1px rgba(255,255,255,.06); }

    .youtube-frame,.twitch-frame{ width:100%; aspect-ratio:16/9; border:0; border-radius:12px; box-shadow:var(--shadow); }

    /* Main sections */
    main{ max-width:var(--max); margin:10px auto 80px; padding:0 16px; }
    .section{ display:none; margin-top:16px; padding:22px; border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(12,12,28,.75), rgba(13,13,30,.6));
      border: 1px solid rgba(124,77,255,.24); box-shadow: var(--shadow); animation: rise .35s ease-out; }
    .section.show{ display:block; }
    @keyframes rise{ from{ transform:translateY(6px); opacity:0 } to{ transform:translateY(0); opacity:1 } }

    .grid{ display:grid; gap:16px; grid-template-columns: repeat(12, 1fr); }
    .col-12{ grid-column: span 12; }
    .col-8{ grid-column: span 8; }
    .col-6{ grid-column: span 6; }
    .col-4{ grid-column: span 4; }
    @media (max-width:980px){
      .col-8,.col-6,.col-4{grid-column:span 12}
    }

    .card{ background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:16px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.04); }
    .h{ font-family:'Cinzel', serif; font-weight:800; letter-spacing:.6px; margin:0 0 8px; color:#fff; text-shadow: 0 0 16px rgba(124,77,255,.35); }
    .p{ margin:0; color:#d7dcff; }
    .muted{ color:#aab0ff; }
    .mini{ color:var(--muted); font-size:.92rem; line-height:1.4; }

    /* Partners (Player profiles) */
    .profiles{ display:grid; gap:16px; grid-template-columns: repeat(3, 1fr); }
    @media (max-width:1100px){ .profiles{ grid-template-columns: repeat(2, 1fr);} }
    @media (max-width:700px){ .profiles{ grid-template-columns: 1fr; } }
    .profile{
      display:grid; grid-template-rows:auto 1fr auto; gap:12px;
      background: linear-gradient(180deg, rgba(20,20,38,.75), rgba(18,18,36,.6));
      border:1px solid rgba(255,255,255,.1); border-radius:14px; padding:14px; box-shadow:var(--shadow); min-height:420px;
    }
    .prof-head{ display:flex; align-items:center; gap:12px; }
    .prof-ava{ width:54px; height:54px; border-radius:12px; background:#1b1b30; overflow:hidden; flex:0 0 auto; box-shadow:0 2px 10px rgba(0,0,0,.35); }
    .prof-ava img{ width:100%; height:100%; object-fit:cover; display:block; }
    .prof-title{ font-weight:900; font-size:1.05rem; }
    .prof-tags{ display:flex; gap:8px; flex-wrap:wrap; margin-top:6px; }
    .badge{ font-size:.75rem; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.14); color:#dfe3ff; background:rgba(255,255,255,.04); }
    .prof-body{ display:grid; gap:10px; }
    .prof-media{ display:none; }
    .prof-media.live{ display:block; }
    .prof-actions{ display:flex; gap:8px; margin-top:auto; }
    .btn-sm{ padding:10px 12px; border-radius:12px; font-weight:800; }

    /* Ads (tasteful, responsive) */
    .ad-slot{
      border:1px dashed rgba(255,255,255,.15); border-radius:12px; padding:10px;
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      color:#c9ccff; text-align:center; font-size:.9rem;
    }
    .ad-label{ font-size:.7rem; color:#9aa0ff; text-transform:uppercase; letter-spacing:.12em; display:block; margin-bottom:6px; }
    /* An inline in-article ad that collapses on mobile if needed */
    .ad-inline{ margin:14px 0; }
    @media (min-width:1024px){
      .ad-sidebar{ position:sticky; top:76px; }
    }

    /* Footer / legal */
    footer{ max-width:var(--max); margin:50px auto 36px; padding:0 16px; color:var(--muted); }
    .legal{ display:grid; gap:16px; grid-template-columns: 1fr; }
    @media (min-width:900px){ .legal{ grid-template-columns: 2fr 1fr; } }
    .fineprint{ font-size:.86rem; line-height:1.5; color:#b6bbff; }
    .foot-row{ display:flex; flex-wrap:wrap; gap:12px; justify-content:space-between; align-items:center; border-top:1px solid rgba(255,255,255,.1); padding-top:12px; margin-top:16px; }
  </style>
</head>
<body>
  <canvas id="starfield" aria-hidden="true"></canvas>
  <div class="aurora" aria-hidden="true"></div>

  <!-- ===================== HEADER ===================== -->
  <header>
    <nav class="nav" aria-label="Primary">
      <a class="brand" href="#" data-tab="home" aria-label="Zindigon Home">
        <img class="logo-img" src="https://i.imgur.com/xnxvXeA.jpeg" alt="Zindigon logo" />
        <span class="logo-text">Zindigon</span>
      </a>
      <div class="spacer"></div>

      <!-- Anime dropdown -->
      <div class="dropdown">
        <button class="menu-btn" id="animeBtn" aria-haspopup="true" aria-expanded="false">
          Anime
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
        </button>
        <div class="menu" role="menu" aria-labelledby="animeBtn">
          <a href="#anime-bz" role="menuitem" data-tab="anime-bz">Bloodline Zero</a>
        </div>
      </div>

      <!-- Games dropdown -->
      <div class="dropdown">
        <button class="menu-btn" id="gamesBtn" aria-haspopup="true" aria-expanded="false">
          Games
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
        </button>
        <div class="menu" role="menu" aria-labelledby="gamesBtn">
          <a href="#game-troll-king" role="menuitem" data-tab="game-troll-king">Adventures of the Troll King</a>
          <a href="#game-atherfall"  role="menuitem" data-tab="game-atherfall">AetherFall</a>
          <a href="#games" role="menuitem" data-tab="games">Games Hub</a>
        </div>
      </div>

      <button class="tab-btn" data-tab="partners" role="tab" aria-selected="false">Partners</button>
      <button class="tab-btn" data-tab="about" role="tab" aria-selected="false">About</button>
      <button class="tab-btn" data-tab="contact" role="tab" aria-selected="false">Contact</button>
    </nav>
  </header>

  <!-- ===================== HERO ===================== -->
  <section id="home" class="hero section show" aria-labelledby="hero-title">
    <!-- Left column: title, actions, featured video, inline ad -->
    <div>
      <div class="hero-card arcane-card">
        <div class="sigils"></div>
        <h1 id="hero-title" class="hero-title">Where Fun, Magic, and Creativity Live.</h1>
        <div class="hero-sub">From imagination to expectation</div>

        <div class="actions">
          <a class="btn" href="https://youtube.com/@zindigon" target="_blank" rel="noopener">YouTube</a>
          <a class="btn btn-ghost" href="https://www.tiktok.com/@zindigon96" target="_blank" rel="noopener">TikTok</a>
          <a class="btn" href="#support" data-tab="contact">✨ Support Us</a>
        </div>
        <p class="mini" style="margin-top:8px">Explore original anime projects, game worlds, and live streams—crafted by Zindigon.</p>
      </div>

      <!-- Featured video (auto-updates via CONFIG.latestVideoApi or uploads playlist fallback) -->
      <div class="arcane-card" id="featuredVideoCard">
        <h3 class="h">Featured Video</h3>
        <iframe id="featuredVideo" class="youtube-frame" title="Zindigon Featured Video"
                src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

        <!-- Tasteful inline ad under the featured video -->
        <div class="ad-slot ad-inline" id="ad-inline-1" aria-label="Advertisement">
          <span class="ad-label">Advertisement</span>
          <div>Place a responsive 300×250/336×280 unit here on mobile; switch to 728×90 on desktop.</div>
        </div>
      </div>
    </div>

    <!-- Right column: featured partner + sidebar ad -->
    <aside class="arcane-card ad-sidebar">
      <h3 class="h">Live Now</h3>
      <div id="featuredPlayer"></div>
      <div class="actions"><a class="btn btn-ghost" id="featuredLink" href="#" target="_blank" rel="noopener">Open Channel</a></div>
      <p class="mini" id="featuredMeta">Follow to catch the next stream!</p>

      <!-- Sidebar ad (sticky) -->
      <div class="ad-slot" id="ad-sidebar-1" aria-label="Advertisement" style="margin-top:12px">
        <span class="ad-label">Advertisement</span>
        <div>Responsive sidebar unit (e.g., 300×600 on desktop; collapses to 300×250 on mobile).</div>
      </div>
    </aside>
  </section>

  <!-- ===================== MAIN ===================== -->
  <main>
    <!-- ANIME: Bloodline Zero -->
    <section id="anime-bz" class="section" aria-labelledby="bz-title">
      <h2 id="bz-title" class="h" style="font-size:1.6rem">Bloodline Zero</h2>
      <div class="grid">
        <div class="col-12 card">
          <p class="p">A grounded, adult-leaning saga where the hidden world of might-enabled users collides with a relentless organization. Expect arcane relics, seismic power tiers, and a universe where destiny is forged in paradox.</p>
        </div>
        <div class="col-6 card">
          <h4 class="h" style="font-size:1.1rem">Lore &amp; World</h4>
          <p class="p">Timelines, factions, and living myths—refined to avoid plot holes and reward rewatchers.</p>
        </div>
        <div class="col-6 card">
          <h4 class="h" style="font-size:1.1rem">Visual &amp; Voice</h4>
          <p class="p">Cinematic teasers, character sheets, and behind-the-mic sessions as the world takes shape.</p>
        </div>
      </div>
    </section>

    <!-- GAMES HUB -->
    <section id="games" class="section" aria-labelledby="games-title">
      <h2 id="games-title" class="h" style="font-size:1.6rem">Games</h2>
      <div class="grid">
        <div class="col-6 card">
          <h3 class="h" style="font-size:1.2rem">Adventures of the Troll King</h3>
          <p class="p">A strategic roguelite with a swipe-based hex world, ethical monetization, and guild-driven cooperation.</p>
          <div class="actions" style="margin-top:10px"><a class="btn" href="#game-troll-king" data-tab="game-troll-king">Open page</a></div>
        </div>
        <div class="col-6 card">
          <h3 class="h" style="font-size:1.2rem">AetherFall</h3>
          <p class="p">Rogue-like tower defense — mankind vs. aliens. Time-bent recruits hold the line against the aether swarm.</p>
          <div class="actions" style="margin-top:10px"><a class="btn" href="#game-atherfall" data-tab="game-atherfall">Open page</a></div>
        </div>
      </div>
      <!-- Inline ad between hubs -->
      <div class="ad-slot ad-inline" id="ad-inline-2" aria-label="Advertisement">
        <span class="ad-label">Advertisement</span>
        <div>Use a fluid unit (e.g., 728×90 desktop / 320×50 mobile).</div>
      </div>
    </section>

    <!-- GAME PAGE: Troll King -->
    <section id="game-troll-king" class="section" aria-labelledby="gtk-title">
      <h2 id="gtk-title" class="h" style="font-size:1.6rem">Adventures of the Troll King</h2>
      <div class="grid">
        <div class="col-12 card">
          <p class="p">A seasonal roguelite with a swipe-based hex map, ethical monetization, and guild-driven cooperation.</p>
          <div class="actions" style="margin-top:10px">
            <a class="btn" href="#" target="_blank" rel="noopener">Download (coming soon)</a>
            <a class="btn btn-ghost" href="#games" data-tab="games">Back to Games Hub</a>
          </div>
        </div>
        <div class="col-6 card">
          <h4 class="h" style="font-size:1.1rem">Design Notes</h4>
          <p class="p">Season cadence, guild levels, off-season progression, and world events.</p>
        </div>
        <div class="col-6 card">
          <h4 class="h" style="font-size:1.1rem">Progress</h4>
          <p class="p">Godot scenes, combat prototypes, map shaders, and UI polish.</p>
        </div>
      </div>
    </section>

    <!-- GAME PAGE: AetherFall -->
    <section id="game-atherfall" class="section" aria-labelledby="af-title">
      <h2 id="af-title" class="h" style="font-size:1.6rem">AetherFall</h2>
      <div class="grid">
        <div class="col-12 card">
          <p class="p">Rogue-like tower defense — mankind vs. aliens. Men traveled through time to recruit all walks and creations of life to hold the line against the aether swarm.</p>
          <div class="actions" style="margin-top:10px">
            <a class="btn" id="af-download" href="#" target="_blank" rel="noopener">Download</a>
            <a class="btn btn-ghost" href="#games" data-tab="games">Back to Games Hub</a>
          </div>
        </div>

        <!-- LIVE LEADERBOARD -->
        <div class="col-12 card">
          <h3 class="h" style="font-size:1.2rem">Leaderboards — Best Wave</h3>
          <p class="p muted">Live data from your endpoint <code>/api/leaderboard/best_wave</code>.</p>
          <div id="af-lb" class="lb-wrap">
            <div id="af-lb-loading" class="p muted">Loading leaderboard…</div>
            <div id="af-lb-error" class="p" style="display:none;">Couldn't load leaderboard. Try refreshing.</div>
            <div id="af-lb-table"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PARTNERS -->
    <section id="partners" class="section" aria-labelledby="partners-title">
      <h2 id="partners-title" class="h" style="font-size:1.6rem">Partners</h2>
      <p class="p muted" style="margin-bottom:10px">Creators we vibe with. If they're live, you’ll see a preview; if not, tap through to check out their latest content.</p>
      <div class="profiles" id="profilesGrid"></div>
    </section>

    <!-- COMMUNITY LIVE (auto-hides if no one live) -->
    <section id="community-live" class="section" aria-labelledby="live-title" style="display:none;">
      <h2 id="live-title" class="h" style="font-size:1.6rem">Community Live</h2>
      <div class="grid" id="liveGrid"></div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section" aria-labelledby="about-title">
      <h2 id="about-title" class="h" style="font-size:1.6rem">About Us</h2>
      <div class="card">
        <p class="p">Zindigon Enterprises is a creative company across anime, game development, and live content. We build worlds for explorers and tell stories for believers—where rules bend, and imagination sets the expectation.</p>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section" aria-labelledby="contact-title">
      <h2 id="contact-title" class="h" style="font-size:1.6rem">Contact</h2>
      <div class="grid">
        <div class="col-6 card" id="support">
          <h3 class="h" style="font-size:1.2rem">Support the Journey</h3>
          <p class="p">Fuel the magic. Every contribution goes back into art, music, servers, and tools.</p>
          <p style="margin-top:10px"><a class="btn" href="https://buymeacoffee.com/" target="_blank" rel="noopener">✨ Donate / Tip</a></p>
        </div>
        <div class="col-6 card">
          <h3 class="h" style="font-size:1.2rem">Reach Out</h3>
          <p class="p">Business &amp; collabs: <a href="mailto:brandonjoea3@gmail.com">brandonjoea3@gmail.com</a></p>
          <p class="p">Press &amp; licensing: <a href="mailto:brandonjoea3@gmail.com">brandonjoea3@gmail.com</a></p>
          <p class="p">General: <a href="mailto:brandonjoea3@gmail.com">brandonjoea3@gmail.com</a></p>
        </div>
      </div>
    </section>
  </main>

  <!-- ===================== FOOTER ===================== -->
  <footer>
    <div class="legal">
      <div class="fineprint">
        <strong>Disclaimers.</strong> Gameplay footage, artwork, and development screenshots are works-in-progress and may change. Leaderboards and community content are provided “as-is” and may be moderated or removed at our discretion.
        <br><br>
        <strong>Intellectual Property.</strong> © <span id="year"></span> Zindigon. All rights reserved. All trademarks referenced are property of their respective owners. Nothing on this site grants any license or right to use Zindigon marks or content without prior written consent.
        <br><br>
        <strong>Affiliate &amp; Ads Disclosure.</strong> Some links or embeds may be monetized. We may receive commissions or ad revenue when you view or interact with partnered content. This never affects your price or our editorial independence.
        <br><br>
        <strong>Streaming Content.</strong> Embedded live streams and VODs are provided by third-party platforms under their terms. Availability may vary based on your region, device, or network restrictions.
        <br><br>
        <strong>Privacy.</strong> By using this site, you agree to our use of standard analytics, cookies, and embedded third-party players per their policies. Do not submit sensitive personal information through public forms.
      </div>
      <div class="fineprint">
        <strong>Contact &amp; Legal Notices.</strong><br>
        Zindigon Enterprises, USA<br>
        <a href="mailto:brandonjoea3@gmail.com">brandonjoea3@gmail.com</a><br><br>
        <em>DMCA / Takedown Requests:</em> Provide URLs, a description of the copyrighted work, your contact info, and a good-faith statement. We honor valid requests promptly.
      </div>
    </div>
    <div class="foot-row">
      <div>© <span id="year2"></span> Zindigon — All worlds reserved.</div>
      <div style="font-size:.86rem;color:#aab0ff">Terms of Use • Privacy • Cookies</div>
    </div>
  </footer>

  <!-- ===================== SCRIPTS ===================== -->
  <script>
    // ---------- CONFIG ----------
    const CONFIG = {
      SITE_PARENTS: ["zindigon.com","www.zindigon.com","localhost"],
      // YouTube: choose ONE approach
      // 1) (Best) A tiny Cloudflare Worker you own that returns { videoId: "..." } for your latest upload:
      //    e.g. latestVideoApi: "https://api.zindigon.com/youtube/latest"
      latestVideoApi: "",

      // 2) (Fallback) Your channel uploads playlist id; the embed will show the playlist (latest first)
      //    This avoids API keys, but shows playlist UI rather than a single video.
      uploadsPlaylistId: "", // e.g. "UUxxxxxxxxxxxxxxxxx"

      // 3) (Optional safety net) A hardcoded video id if both of the above are missing:
      fallbackVideoId: "qTNXxz_y9-w",

      // AetherFall leaderboard endpoint
      aetherfallLbUrl: "/api/leaderboard/best_wave?limit=50",

      // Partners
      partners: [
        { type:"twitch", name:"Zindigon",  tag:"Zindigon",  joined:"2025-11-01", description:"Games, dev logs, and anime vibes.", twitchChannel:"zindigon",  channelUrl:"https://www.twitch.tv/zindigon",  avatar:"", isLive:false },
        { type:"twitch", name:"Spaz",      tag:"SpaZFUSC",  joined:"2025-11-11", description:"Highlights, guides, and chill streams.", twitchChannel:"spazfusc", channelUrl:"https://www.twitch.tv/spazfusc", avatar:"", isLive:false }
      ],

      // Downloads
      aetherfallDownload: "#"
    };

    // ---------- STARFIELD ----------
    (function(){
      const c=document.getElementById('starfield'); const ctx=c.getContext('2d');
      let w=0,h=0,stars=[];
      function resize(){
        w=c.width=innerWidth*devicePixelRatio; h=c.height=innerHeight*devicePixelRatio;
        ctx.setTransform(1,0,0,1,0,0);
        stars=new Array(180).fill(0).map(()=>({x:Math.random()*w,y:Math.random()*h,r:Math.random()*1.3+.2,s:Math.random()*0.6+0.2,hue:200+Math.random()*80}));
      }
      addEventListener('resize', resize, {passive:true}); resize();
      let t=0; (function loop(){
        t+=0.01; ctx.clearRect(0,0,w,h);
        for(const st of stars){
          st.y+=st.s; if(st.y>h) st.y=-10;
          ctx.beginPath();
          const glow=0.45+0.45*Math.sin(t+st.x*0.001);
          ctx.fillStyle=`hsla(${st.hue},100%,${70+glow*20}%,${0.55+glow*0.25})`;
          ctx.shadowBlur=12+glow*18; ctx.shadowColor=ctx.fillStyle;
          ctx.arc(st.x,st.y,st.r,0,Math.PI*2); ctx.fill();
        }
        requestAnimationFrame(loop);
      })();
    })();

    // ---------- NAV / TABS ----------
    const sections = document.querySelectorAll('.section');
    const tabBtns = document.querySelectorAll('.tab-btn, a.brand, .menu a[data-tab]');
    function showTab(id){
      sections.forEach(s=>s.classList.toggle('show', s.id===id));
      document.querySelectorAll('.tab-btn').forEach(b=>{
        b.classList.toggle('active', b.dataset.tab===id);
        b.setAttribute('aria-selected', b.classList.contains('active')?'true':'false');
      });
      const el=document.getElementById(id); if(el){ el.scrollIntoView({behavior:'smooth', block:'start'}); }
      dropdown(false); // close dropdowns
      if(id==='game-atherfall') loadAetherfallLeaderboard();
    }
    tabBtns.forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const id=btn.dataset.tab||'home';
        if(id){ e.preventDefault(); showTab(id); }
      });
    });

    // Deep link: ?tab=game-atherfall OR ?game=atherfall
    (function(){
      const urlParams=new URLSearchParams(location.search);
      const game=urlParams.get('game');
      const tab=urlParams.get('tab');
      if(game==='atherfall') showTab('game-atherfall');
      else if(game==='troll-king') showTab('game-troll-king');
      else if(tab) showTab(tab);
    })();

    // ---------- DROPDOWNS ----------
    const animeBtn = document.getElementById('animeBtn');
    const gamesBtn = document.getElementById('gamesBtn');
    const menus = [];
    function attachDropdown(btn){
      const menu = btn.parentElement.querySelector('.menu'); menus.push(menu);
      function openState(open){
        menu.classList.toggle('show', open);
        btn.setAttribute('aria-expanded', String(open));
      }
      btn.addEventListener('click', (e)=>{ e.preventDefault(); openState(!menu.classList.contains('show')); });
      document.addEventListener('click', (e)=>{ if(!e.target.closest('.dropdown')) openState(false); });
      btn.addEventListener('keydown', (e)=>{ if(e.key==='ArrowDown'){ openState(true); menu.querySelector('a')?.focus(); }});
    }
    function dropdown(open){
      menus.forEach(m=>m.classList.toggle('show', !!open));
      [animeBtn,gamesBtn].forEach(b=>b && b.setAttribute('aria-expanded', String(!!open)));
    }
    attachDropdown(animeBtn);
    attachDropdown(gamesBtn);

    // ---------- YEAR ----------
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('year2').textContent = new Date().getFullYear();

    // ---------- HELPERS ----------
    function twitchEmbedSrc(channel){
      const parents = CONFIG.SITE_PARENTS.map(p=>`parent=${encodeURIComponent(p)}`).join('&');
      return `https://player.twitch.tv/?channel=${encodeURIComponent(channel)}&${parents}&muted=true`;
    }
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }

    // ---------- FEATURED VIDEO (auto-latest) ----------
    async function setFeaturedVideo(){
      const iframe = document.getElementById('featuredVideo');
      try{
        if(CONFIG.latestVideoApi){
          const r = await fetch(CONFIG.latestVideoApi, { headers:{'accept':'application/json'} });
          if(r.ok){
            const j = await r.json();
            if(j && j.videoId){
              iframe.src = `https://www.youtube.com/embed/${encodeURIComponent(j.videoId)}`;
              return;
            }
          }
        }
        if(CONFIG.uploadsPlaylistId){
          // Playlist shows latest first without API keys
          iframe.src = `https://www.youtube.com/embed/videoseries?list=${encodeURIComponent(CONFIG.uploadsPlaylistId)}`;
          return;
        }
        // Fallback single video
        iframe.src = `https://www.youtube.com/embed/${encodeURIComponent(CONFIG.fallbackVideoId)}`;
      }catch{
        iframe.src = `https://www.youtube.com/embed/${encodeURIComponent(CONFIG.fallbackVideoId)}`;
      }
    }
    setFeaturedVideo();

    // ---------- FEATURED PARTNER (top-right) ----------
    function pickFeatured(){ return CONFIG.partners.find(p=>p.isLive) || CONFIG.partners[0]; }
    function renderFeatured(){
      const target = document.getElementById('featuredPlayer');
      target.innerHTML = '';
      const p = pickFeatured(); if(!p) return;
      const iframe = document.createElement('iframe');
      iframe.className = 'twitch-frame';
      iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
      iframe.allowFullscreen = true;
      iframe.src = twitchEmbedSrc(p.twitchChannel);
      target.appendChild(iframe);

      const link = document.getElementById('featuredLink');
      link.href = p.channelUrl || '#';
      document.getElementById('featuredMeta').textContent = `${p.name} — ${p.tag}`;
    }
    renderFeatured();

    // ---------- PARTNER PROFILES ----------
    function renderProfileCard(p){
      const card = document.createElement('div');
      card.className = 'profile';

      // Head
      const head = document.createElement('div'); head.className='prof-head';
      const ava = document.createElement('div'); ava.className='prof-ava';
      const img = document.createElement('img');
      img.src = p.avatar || 'https://dummyimage.com/200x200/131326/ffffff&text=Z';
      img.alt = `${p.name} avatar`;
      ava.appendChild(img);
      const titleWrap = document.createElement('div');
      const title = document.createElement('div'); title.className='prof-title'; title.textContent = p.name;
      const tags = document.createElement('div'); tags.className='prof-tags';
      const b1 = document.createElement('span'); b1.className='badge'; b1.textContent = p.tag;
      const b2 = document.createElement('span'); b2.className='badge'; b2.textContent = `Joined ${new Date(p.joined).toLocaleDateString()}`;
      tags.append(b1,b2);
      titleWrap.append(title,tags);
      head.append(ava, titleWrap);

      // Body
      const body = document.createElement('div'); body.className='prof-body';
      const desc = document.createElement('p'); desc.className='p'; desc.textContent = p.description || '';
      const media = document.createElement('div'); media.className='prof-media';
      if(p.isLive){
        media.classList.add('live');
        const frame = document.createElement('iframe');
        frame.className='twitch-frame';
        frame.src = twitchEmbedSrc(p.twitchChannel);
        frame.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
        frame.allowFullscreen = true;
        media.appendChild(frame);
      }
      body.append(desc, media);

      // Actions
      const actions = document.createElement('div'); actions.className='prof-actions';
      const visit = document.createElement('a'); visit.className='btn btn-ghost btn-sm'; visit.href=p.channelUrl; visit.target='_blank'; visit.rel='noopener';
      visit.textContent = p.isLive ? 'Watch Live' : `Explore ${p.name}'s Content`;
      actions.appendChild(visit);

      card.append(head, body, actions);
      return card;
    }

    function buildPartners(){
      const grid = document.getElementById('profilesGrid'); grid.innerHTML='';
      CONFIG.partners.forEach(p => grid.appendChild(renderProfileCard(p)));
    }
    buildPartners();

    // ---------- COMMUNITY LIVE (bottom, only if any live) ----------
    function buildCommunityLive(){
      const live = CONFIG.partners.filter(p=>p.isLive);
      const sec = document.getElementById('community-live');
      const grid = document.getElementById('liveGrid');
      if(!live.length){ sec.style.display='none'; return; }
      sec.style.display='block'; grid.innerHTML='';
      live.forEach(p=>{
        const col = document.createElement('div'); col.className='col-6 card';
        const h = document.createElement('h3'); h.className='h'; h.style.fontSize='1.1rem'; h.textContent = `${p.name} — Live`;
        const f = document.createElement('iframe'); f.className='twitch-frame'; f.src=twitchEmbedSrc(p.twitchChannel);
        f.allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share'; f.allowFullscreen=true;
        const actions = document.createElement('div'); actions.className='actions';
        const a = document.createElement('a'); a.className='btn'; a.href=p.channelUrl; a.target='_blank'; a.rel='noopener'; a.textContent='Open Channel';
        actions.appendChild(a);
        col.append(h,f,actions); grid.appendChild(col);
      });
    }
    buildCommunityLive();

    // ---------- WIRED LINKS ----------
    document.getElementById('af-download').href = CONFIG.aetherfallDownload;

    // ---------- AETHERFALL LEADERBOARD ----------
    async function loadAetherfallLeaderboard(){
      const box = document.getElementById('af-lb-table');
      const loading = document.getElementById('af-lb-loading');
      const err = document.getElementById('af-lb-error');
      loading.style.display='block'; err.style.display='none'; box.innerHTML='';

      try{
        const r = await fetch(CONFIG.aetherfallLbUrl, { headers: { 'accept': 'application/json' } });
        const data = await r.json();
        if(!r.ok || !data?.ok){ throw new Error('bad_response'); }
        const items = data.items || [];
        if(!items.length){
          box.innerHTML = `<p class="p muted">No entries yet. Be the first to hold the line.</p>`;
        }else{
          const rows = items.map(it=>`
            <tr>
              <td>${it.rank ?? ''}</td>
              <td>${escapeHtml(it.name ?? 'Unknown')}</td>
              <td><span class="badge">${escapeHtml(it.guild ?? '-')}</span></td>
              <td>${Number(it.best_wave ?? it.score ?? 0)}</td>
            </tr>
          `).join('');
          box.innerHTML = `
            <div style="overflow:auto">
              <table style="width:100%; border-collapse: collapse;">
                <thead>
                  <tr style="text-align:left;color:#cfd3ff;font-weight:800;">
                    <th style="padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.08)">Rank</th>
                    <th style="padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.08)">Player</th>
                    <th style="padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.08)">Guild</th>
                    <th style="padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.08)">Best Wave</th>
                  </tr>
                </thead>
                <tbody>${rows}</tbody>
              </table>
            </div>
          `;
        }
      }catch(e){
        err.style.display='block';
      }finally{
        loading.style.display='none';
      }
    }

  </script>
</body>
</html>
